"use strict";var _=Object.defineProperty;var M=(a,e,t)=>e in a?_(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var n=(a,e,t)=>(M(a,typeof e!="symbol"?e+"":e,t),t);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const o=require("vue"),y=require("./Message.vue_vue_type_script_setup_true_lang.js"),p=new Map,u=new Map,d=new Map;let h=1;class w{info(e,t){new r().create(e,"info",t)}error(e,t){new r().create(e,"error",t)}success(e,t){new r().create(e,"success",t)}warning(e,t){new r().create(e,"warning",t)}}class r{constructor(){n(this,"component",y.default);n(this,"instance");n(this,"id",0);n(this,"div",null);n(this,"props",null);n(this,"top",o.ref(68));n(this,"containerStyle")}create(e,t,i){this.id=h,h++;let s={type:t,position:"mid"};typeof e=="string"?s.msg=e:s={...s,...e,msg:e.msg?e.msg:""},i&&(s.duration=i),this.props=s;let m=document.createElement("div");this.div=document.getElementById("c-message-provider").appendChild(m),this.div.className="c-message-container";let c=s.position=="mid"?p:s.position=="left"?u:d;c.set(this.id,this);let g=s.position=="mid"?"left: 50%; transform: translateX(-50%);":s.position=="left"?"left: 0px":"right: 0px";this.containerStyle=o.computed(()=>{let l=0;return c.forEach((v,f)=>{f<this.id&&(l+=v.top.value)}),g+"; top: "+l+"px"}),this.recalcTop(),this.instance=o.createApp(this.component,{...s,destroy:()=>this.destroy.call(this)}),this.instance.mount(this.div)}destroy(){let e=this.props.position=="mid"?p:this.props.position=="left"?u:d;if(e.has(this.id)){this.div.className="c-message-container c-message-container-hide";let t=setInterval(()=>{this.top.value<=0&&clearInterval(t),this.recalcTop(),e.forEach((i,s)=>{s>this.id&&i.recalcTop()}),this.top.value-=2},6);setTimeout(()=>{var i;this.instance.unmount(),(i=document.getElementById("c-message-provider"))==null||i.removeChild(this.div),e.delete(this.id)},400)}}recalcTop(){this.div.style=this.containerStyle.value}}const T=()=>new w;exports.useMsg=T;
