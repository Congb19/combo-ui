"use strict";var o=Object.defineProperty;var r=(i,t,e)=>t in i?o(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var s=(i,t,e)=>(r(i,typeof t!="symbol"?t+"":t,e),e);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("vue"),l=require("./Loading.vue_vue_type_script_setup_true_lang.js"),c=require("./LoadingBar.vue_vue_type_script_setup_true_lang.js");let n=null,u=null;class h{constructor(t){s(this,"component",l.default);s(this,"instance",null);s(this,"container",document.getElementById("c-loading-provider"));s(this,"options");s(this,"status",a.ref(!1));this.options=t}create(){this.container=document.getElementById("c-loading-provider"),this.instance=a.createApp(this.component,this.options)}start(){this.instance||this.create(),this.instance.mount(this.container),this.status.value=!0}stop(){this.instance&&this.instance.unmount(),this.instance=null,this.status.value=!1}}class v{constructor(t){s(this,"component",c.default);s(this,"instance",null);s(this,"container",document.getElementById("c-loading-provider"));s(this,"options");s(this,"finished",!1);s(this,"color",a.ref("var(--c-color-primary-1)"));s(this,"timer");s(this,"status",a.ref(0));this.options=t}create(){this.container=document.getElementById("c-loading-provider"),this.instance=a.createApp(this.component,{...this.options,status:this.status,color:this.color})}start(){this.unmount(),this.instance||this.create(),this.instance.mount(this.container),this.status.value=0,this.timer=setInterval(()=>{this.status.value>=80||this.status.value++},10)}stop(){this.gogo(100)}error(){this.instance||this.start(),this.color.value="var(--c-color-error-1)",this.stop()}finish(){this.instance||this.start(),this.color.value="var(--c-color-success-1)",this.stop()}unmount(){clearInterval(this.timer),this.instance&&this.instance.unmount(),this.instance=null,this.status.value=0,this.color.value="var(--c-color-primary-1)"}gogo(t){if(t>this.status.value){let e=setInterval(()=>{this.status.value==100&&(this.unmount(),this.status.value=0,clearInterval(e)),t>this.status.value?this.status.value++:clearInterval(e)},1)}else if(t<this.status.value){let e=setInterval(()=>{this.status.value==100&&(this.unmount(),this.status.value=0,clearInterval(e)),t<this.status.value?this.status.value--:clearInterval(e)},1)}}goto(t){this.instance||this.start(),clearInterval(this.timer),!(t<0||t>100)&&t!==this.status.value&&this.gogo(t)}}const d=i=>(n||(n=new h(i)),u||(u=new v(i)),{CLoading:n,CLoadingStatus:n.status,CLoadingBar:u,CLoadingBarStatus:u.status});exports.useLoading=d;
