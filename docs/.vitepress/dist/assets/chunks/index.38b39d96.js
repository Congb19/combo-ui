var M=Object.defineProperty;var C=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var n=(i,e,t)=>(C(i,typeof e!="symbol"?e+"":e,t),t);import{d as x,e as g,h as N,v as S,o as m,c as u,x as T,a as B,t as E,A as b,n as k,b as I,f as q,a3 as V}from"./framework.25603a75.js";import"./index.307c01ed.js";const A={class:"c-message-wrapper"},z=x({props:{type:{type:String,default:"info"},msg:{type:String,required:!0},duration:{type:Number,required:!1},destroy:{type:Function,required:!0},position:{type:String,default:"top"},closable:{type:Boolean,default:!1}},setup(i){const e=i,t=g(()=>`c-message
    c-message-${e.type}
  `);return N(()=>{e.duration&&setTimeout(()=>{e.destroy()},e.duration)}),S(()=>{}),(a,s)=>(m(),u("div",A,[T("div",{class:k(I(t))},[B(E(i.msg)+" ",1),i.closable?(m(),u("span",{key:0,class:"c-message__close",onClick:s[0]||(s[0]=()=>i.destroy())}," Ã— ")):b("",!0)],2)]))}}),r=new Map,c=new Map,l=new Map;let h=1;class D{info(e,t){new o().create(e,"info",t)}error(e,t){new o().create(e,"error",t)}success(e,t){new o().create(e,"success",t)}warning(e,t){new o().create(e,"warning",t)}}class o{constructor(){n(this,"component",z);n(this,"instance");n(this,"id",0);n(this,"div",null);n(this,"props",null);n(this,"top",q(68));n(this,"containerStyle")}create(e,t,a){this.id=h,h++;let s={msg:"",duration:5e3,type:t,position:"mid"};typeof e=="string"?s.msg=e:s={...s,...e,msg:e.msg?e.msg:""},a&&(s.duration=a),this.props=s;let f=document.createElement("div");this.div=document.getElementById("c-message-provider").appendChild(f),this.div.className="c-message-container";let p=s.position=="mid"?r:s.position=="left"?c:l;p.set(this.id,this);let v=s.position=="mid"?"left: 50%; transform: translateX(-50%);":s.position=="left"?"left: 0px":"right: 0px";this.containerStyle=g(()=>{let d=0;return p.forEach((y,w)=>{w<this.id&&(d+=y.top.value)}),v+"; top: "+d+"px"}),this.recalcTop(),this.instance=V(this.component,{...s,destroy:()=>this.destroy.call(this)}),this.instance.mount(this.div)}destroy(){if(r.has(this.id)||c.has(this.id)||l.has(this.id)){let e=this.props.position=="mid"?r:this.props.position=="left"?c:l;this.div.className="c-message-container c-message-container-hide";let t=setInterval(()=>{this.top.value<=0&&clearInterval(t),this.recalcTop(),e.forEach((a,s)=>{s>this.id&&a.recalcTop()}),this.top.value-=2},6);setTimeout(()=>{var a;this.instance.unmount(),(a=document.getElementById("c-message-provider"))==null||a.removeChild(this.div),e.delete(this.id)},400)}}recalcTop(){this.div.style=this.containerStyle.value}}const U=()=>new D;export{U as u};
